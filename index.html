<head>
    <script type="module">
        import {Breakout} from "./blockbreaker.js";
        let game;
        function init() {
            const canvas = document.getElementById('dvd');
            game = new Breakout(canvas, keyMap);
            
            // update every 17 ms
            setInterval(update, 0);
        }
        
        function update() {
            game.mainLoop();
        }
        
        window.onload = init;
        
        const keyMap = {};
        
        function handleKeyPress(e) {
            keyMap[e.key] = true;
        }
        
        function handleKeyUp(e) {
            keyMap[e.key] = false;
        }
        
        window.onkeydown = handleKeyPress;
        window.onkeyup = handleKeyUp;
    </script>
</head>

<body>

    <audio id = "soundeffect">
        <source src="beepsound.mp3" type="audio/mpeg">
    </audio>

    <p id="fps"></p>
    <canvas style="border: 1px solid black" id="dvd" />
    <p>
        Extra Tasks Completed: Extra Task 1: Add bouncing sounds, 
        Extra Task 2: Implement winning and losing.,
        Extra Task 3: Add a welcome screen with instructions and a pause screen
    </p>
</body>
